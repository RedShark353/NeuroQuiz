<!DOCTYPE html>
<html>
<head>
	<title>NeuroQuiz</title>
	<link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
	<link rel="stylesheet" type="text/css" href="css/customQuizStyles.css">
</head>
<body onload="openModal()">

	<header id="main-header">
		<div class="container">
			<section id="headerTitle">
				<h1>NeuroQuiz</h1>
			</section>

			<section id="settings">
				<button class="dropbtn" onclick="dropDown()"></button>
				<div id="dropDown" class="dropdown-content">
				    <div id="totalQuestions">
				    	<p id="notice">Eφαρμόζονται από την επόμενη ερώτηση</p>
				    	<p>Αριθμός Ερωτήσεων</p>
				    	<button class="minus_btn" onclick="setQuestions(-1)">-</button>
				    	<p id="qNumber">5</p>
				    	<button class="plus_btn" onclick="setQuestions(1)">+</button>
				    </div>
				    <div id="totalAnswers">
				    	<p>Αριθμός Απαντήσεων</p>
				    	<button class="minus_btn" onclick="setAnswers(-1)">-</button>
				    	<p id="aNumber">4</p>
				    	<button class="plus_btn" onclick="setAnswers(1)">+</button>
				    </div>
			  </div>
			</section>
		</div>
	</header>

	<!-- The Modal -->
	<div id="myModal" class="modal">

	  <!-- Modal content -->
	  <div class="modal-content">
	    <span class="close">&times;</span>
	    <h4>Περιεχόμενα Quiz</h4>
	    <button id="allButton" onclick="checkAll()">Επιλογή όλων</button>
	    <button id="uncheckAllButton" onclick="uncheckAll()">Καθαρισμός όλων</button>
	    <input type="checkbox" id="cranialNervesCheckbox" name="modalCheckbox" value="Cranial Nerves">
		<label for="cranialNervesCheckbox">Εγκεφαλικές συζυγίες</label>
		<input type="checkbox" id="spinalTractsCheckBox" name="modalCheckbox" value="Spinal Tracts">
		<label for="spinalTractsCheckBox">Δεμάτια νωτιαίου μυελού</label>
    	<h4>Αριθμός Ερωτήσεων</h4>
    	<button class="minus_btn" onclick="customQuestions(-1)">-</button>
    	<p id="qCustom">5</p>
    	<button class="plus_btn" onclick="customQuestions(1)">+</button>
    	<h4>Αριθμός Απαντήσεων</h4>
    	<button class="minus_btn" onclick="customAnswers(-1)">-</button>
    	<p id="aCustom">4</p>
    	<button class="plus_btn" onclick="customAnswers(1)">+</button>
		<button onclick="startCustom()" id="startCustom">Έναρξη</button>
	  </div>

	</div>

	<section id="showcase">
		<div class="container">
			<img src="images/Brain.jpg">
		</div>
	</section>

	<div class="container">
		<section id="main-left">
			<div id="question">
				<h3 id="questionNumber"></h3>
				<div id="question_space">
					<img src="images/Tracts.jpg" id="question_img">
				</div>
				<h3 id="questionText"></h3>
				<button id="newQuiz" onclick="newQuiz()">Νέο Quiz</button>
				<a id="return" href="index.html">Επιστροφή στην Αρχική</a>
			</div>

			<div id="answers">
				<ul id="answerOptions"></ul>
			</div>

			<div id="answerEvaluation">
				<p id="result"></p>
				<button id="verify" onclick="verify()">Επαλήθευση</button>
				<button id="next" onclick="nextQuestion()">Επόμενο</button>
			</div>
		</section>

		<section id="main-right">
				<p id="score">0</p>
				<h3 id="scoreText">Score</h3>
		</section>
	</div>

	<footer id="main-footer">
		<p>Konstantinos Vrettos | Contact: theneuroquiz@gmail.com</p>
	</footer>

	<script type="text/javascript">

		//CONSTANTS
		var OPTIONS = 4;
		var TOTAL_QUESTIONS = 5;

		//DATA

		//Cranial Nerves
		var cn_I = new Map([
			["#", "I"],
			["name", "Οσφρητικό νεύρο"],
			["category", "Αισθητικό"],
			["emerging", "Δεν αναδύεται"],
			["nuclei", ["Παροσφρητική άλως", "Περιαμυγδαλοειδής φλοιός"]],
			["function", "Μετάδοση της αίσθησης της όσφρησης"],
			["position", "6"],
			["img", "images/cranialNerves.jpg"]
			]);

		var cn_II = new Map([
			["#", "II"],
			["name", "Οπτικό νεύρο"],
			["category", "Αισθητικό"],
			["emerging", "Δεν αναδύεται"],
			["nuclei", ["Πυρήνας έξω γονατώδους σώματος"]],
			["function", "Μετάδοση των οπτικών πληροφοριών"],
			["position", "7"],
			["img", "images/cranialNerves.jpg"]
			]);

		var cn_III = new Map([
			["#", "III"],
			["name", "Κοινό κινητικό νεύρο"],
			["category", "Μικτό"],
			["emerging", "Μεσοσκελιαίος βόθρος (μεσεγκέφαλος)"],
			["nuclei", ["Πυρήνας κοινού κινητικού", "Πυρήνας Edinger-Westphal"]],
			["function", "Νεύρωση ανελκτήρα άνω βλεφάρου, άνω, έσω, κάτω ορθού και κάτω λοξού μυών του οφθαλμικού βολβού"],
			["position", "5"],
			["img", "images/cranialNerves.jpg"]
			]);

		var cn_IV = new Map([
			["#", "IV"],
			["name", "Τροχιλιακό νεύρο"],
			["category", "Κινητικό"],
			["emerging", "Ραχιαία επιφάνεια στελέχους (μεσεγκέφαλος)"],
			["nuclei", ["Πυρήνας τροχιλιακού νεύρου"]],
			["function", "Νεύρωση άνω λοξού μυός του οφθαλμικού βολβού"],
			["position", "8"],
			["img", "images/cranialNerves.jpg"]
			]);

		var cn_V = new Map([
			["#", "V"],
			["name", "Τρίδυμο νεύρο"],
			["category", "Μικτό"],
			["emerging", "Πλάγια επιφάνεια γέφυρας"],
			["nuclei", ["Κύριος αισθητικός πυρήνας του τριδύμου", "Νωτιαίος πυρήνας του τριδύμου", "Μεσεγκεφαλικός πυρήνας του τριδύμου", "Κινητικός πυρήνας του τριδύμου"]],
			["function", "Αισθητική νεύρωση προσώπου και κινητική νεύρωση μυών μάσησης"],
			["position", "4"],
			["img", "images/cranialNerves.jpg"]
			]);

		var cn_VI = new Map([
			["#", "VI"],
			["name", "Απαγωγό νεύρο"],
			["category", "Κινητικό"],
			["emerging", "Οπίσθια γεφυρική αύλακα"],
			["nuclei", ["Πυρήνας απαγωγού νεύρου"]],
			["function", "Νεύρωση έξω ορθού μυός του οφθαλμικού βολβού"],
			["position", "9"],
			["img", "images/cranialNerves.jpg"]
			]);

		var cn_VII = new Map([
			["#", "VII"],
			["name", "Προσωπικό νεύρο"],
			["category", "Μικτό"],
			["emerging", "Υπερελαϊκό βοθρίο (γέφυρα)"],
			["nuclei", ["Κινητικός πυρήνας προσωπικού", "Άνω σιαλικός πυρήνας", "Πυρήνας της μονήρους δεσμίδας"]],
			["function", "Νεύρωση των μιμικών μυών του προσώπου, αίσθηση της γεύσης από τα πρόσθια 2/3 της γλώσσας, εκκριτική νεύρωση των σιελογόνων αδένων εκτός της παρωτίδας και του δακρυικού αδένα"],
			["position", "3"],
			["img", "images/cranialNerves.jpg"]
			]);

		var cn_VIII = new Map([
			["#", "VIΙΙ"],
			["name", "Στατικοακουστικό νεύρο"],
			["category", "Αισθητικό"],
			["emerging", "Υπερελαϊκό βοθρίο (γέφυρα)"],
			["nuclei", ["Κοχλιακοί πυρήνες", "Αιθουσαίοι πυρήνες"]],
			["function", "Αίσθηση της ακοής και της θέσης στο χώρο (ισορροπία, περιστροφή)"],
			["position", "10"],
			["img", "images/cranialNerves.jpg"]
			]);

		var cn_IX = new Map([
			["#", "IΧ"],
			["name", "Γλωσσοφαρυγγικό νεύρο"],
			["category", "Μικτό"],
			["emerging", "Οπίσθια παρελαϊκή αύλακα (προμήκης)"],
			["nuclei", ["Μικτός ή κοιλιακός πυρήνας", "Κάτω σιαλικός πυρήνας", "Πυρήνας της μονήρους δεσμίδας"]],
			["function", "Αίσθηση της γεύσης από το οπίσθιο 1/3 της γλώσσας, εκκριτική νεύρωση παρωτίδας, νεύρωση βελονοφαρυγγικού μυ"],
			["position", "2"],
			["img", "images/cranialNerves.jpg"]
			]);

		var cn_X = new Map([
			["#", "Χ"],
			["name", "Πνευμονογαστρικό νεύρο"],
			["category", "Μικτό"],
			["emerging", "Οπίσθια παρελαϊκή αύλακα (προμήκης)"],
			["nuclei", ["Μικτός ή κοιλιακός πυρήνας", "Ραχιαίος πυρήνας του πνευμονογαστρικού", "Πυρήνας της μονήρους δεσμίδας"]],
			["function", "Νεύρωση των μυών του λάρυγγα και του φάρυγγα, παρασυμπαθητικήνεύρωση των θωρακικών και κοιλιακών σπλάγχνων μέχρι τη σπληνική καμπή, αίσθηση της γεύσης από την επιγλωττίδα. Εξυπηρέτηση της κατάποσης και της φώνησης."],
			["position", "11"],
			["img", "images/cranialNerves.jpg"]
			]);

		var cn_XI = new Map([
			["#", "ΧI"],
			["name", "Παραπληρωματικό νεύρο"],
			["category", "Κινητικό"],
			["emerging", "Οπίσθια παρελαϊκή αύλακα"],
			["nuclei", ["Μικτός ή κοιλιακός πυρήνας (προμηκική μοίρα)", "Νωτιαίος πυρήνας του παραπληρωματικού (νωτιαία μοίρα)"]],
			["function", "Νεύρωση του στερνοκλειδομαστοειδούς και του τραπεζοειδούς μυών"],
			["position", "1"],
			["img", "images/cranialNerves.jpg"]
			]);

		var cn_XII = new Map([
			["#", "ΧΙΙ"],
			["name", "Υπογλώσσιο νεύρο"],
			["category", "Κινητικό"],
			["emerging", "Πρόσθια παρελαϊκή αύλακα (προμήκης)"],
			["nuclei", ["Πυρήνας του υπογλωσσίου"]],
			["function", "Νεύρωση μυών της γλώσσας και των κάτωθεν του υοειδούς μυών"],
			["position", "12"],
			["img", "images/cranialNerves.jpg"]
			]);

		//Supplementary for Cranial Nerves
		var cranial_nerves = [cn_I, cn_II, cn_III, cn_IV, cn_V, cn_VI, cn_VII, cn_VIII, cn_IX, cn_X, cn_XI, cn_XII];

		var cn_questions_text = new Map([
			["#", "Ποιός αριθμός αντιστοιχεί στο "],
			["name", "Πως λέγεται το νεύρο με αριθμό "],
			["category", "Τι είδους είναι το "],
			["emerging", "Από που αναδύεται το "],
			["nuclei", "Ποιός πυρήνας ανήκει στο "],
			["function", "Ποιά λειτουργία αντιστοιχεί στο "],
			["position", "Ποιός αριθμός αντιστοιχεί στο "]
			])

		var cn_questions = ["#", "category", "emerging", "nuclei", "function", "position"];

		//Spinal Tracts

		//Ascending
		var lateral_spinothalamic = new Map([
			["name", "Πλάγιο Νωτιαιοθαλαμικό δεμάτιο"],
			["crossing", "Οι νευρικές ίνες διέρχονται από τον πρόσθιο φαιό και λευκό σύνδεσμο και χιάζονται προς τα άνω, κατά ένα νευροτόμιο"],
			["function", "Άλγους και θερμοκρασίας"],
			["passing", "Επιχείλια ζώνη Lissauer"],
			["ending", "Κοιλιακός οπίσθιος έξω πυρήνας του θαλάμου"],
			["position", "9"],
			["type", "Ανιόν"],
			["img", "images/Tracts.jpg"]
			])

		var ventral_spinothalamic = new Map([
			["name", "Πρόσθιο Νωτιαιοθαλαμικό δεμάτιο"],
			["crossing", "Οι νευρικές ίνες διέρχονται από τον πρόσθιο φαιό και λευκό σύνδεσμο και χιάζονται προς τα άνω, κατά αρκετά νευροτόμια"],
			["function", "Αδρά αφή και πίεση"],
			["passing", "Επιχείλια ζώνη Lissauer"],
			["ending", "Κοιλιακός οπίσθιος έξω πυρήνας του θαλάμου"],
			["position", "8"],
			["type", "Ανιόν"],
			["img", "images/Tracts.jpg"]
			])

		var fasciculus_gracilis = new Map([
			["name", "Ισχνό δεμάτιο"],
			["crossing", "Γίνεται στον Αισθητικό Χιασμό"],
			["function", "Διακριτική αφή, παλαισθησία, κιναισθησία"],
			["passing", "Έσω λημνίσκος"],
			["ending", "Κοιλιακός οπίσθιος έξω πυρήνας του θαλάμου"],
			["position", "13"],
			["type", "Ανιόν"],
			["img", "images/Tracts.jpg"]
			])

		var fasciculus_cuneatus = new Map([
			["name", "Σφηνοειδές δεμάτιο"],
			["crossing", "Γίνεται στον Αισθητικό Χιασμό"],
			["function", "Διακριτική αφή, παλαισθησία, κιναισθησία"],
			["passing", "Έσω λημνίσκος"],
			["ending", "Κοιλιακός οπίσθιος έξω πυρήνας του θαλάμου"],
			["position", "12"],
			["type", "Ανιόν"],
			["img", "images/Tracts.jpg"]
			])

		var dorsal_spinocerebellar = new Map([
			["name", "Οπίσθιο νωτιαιοπαρεγκεφαλιδικό δεμάτιο"],
			["crossing", "Δεν χιάζεται"],
			["function", "Αισθητικότητα μυών και αρθρώσεων για την παρεγκεφαλίδα"],
			["passing", "Στήλη Clark (Ραχιαίος πυρήνας)"],
			["ending", "Ομόπλευρο ημιμόριο της παρεγκεφαλίδας"],
			["position", "11"],
			["type", "Ανιόν"],
			["img", "images/Tracts.jpg"]
			])

		var ventral_spinocerebellar = new Map([
			["name", "Πρόσθιο νωτιαιοπαρεγκεφαλιδικό δεμάτιο"],
			["crossing", "Ορισμένες νευρικές ίνες χιάζονται κατά τη μέση γραμμή, ενώ άλλες ανέρχονται ομόπλευρα"],
			["function", "Αισθητικότητα μυών και αρθρώσεων για την παρεγκεφαλίδα"],
			["passing", "Στήλη Clark (Ραχιαίος πυρήνας)"],
			["ending", "Παρεγκεφαλιδικός φλοιός"],
			["position", "10"],
			["type", "Ανιόν"],
			["img", "images/Tracts.jpg"]
			])

		var spinotectal = new Map([
			["name", "Νωτιαιοτετραδυμικό δεμάτιο"],
			["crossing", "Χιάζεται κατά τη μέση γραμμή"],
			["function", "Νωτιαιο-οπτικά αντανακλαστικά, κινήσεις οφθαλμών και κεφαλής προς την πηγή του ερεθίσματος"],
			["passing", "Πρόσθιο (άνω) διδύμιο"],
			["ending", "Πρόσθιο (άνω) διδύμιο"],
			["position", "Δεν εικονίζεται"],
			["type", "Ανιόν"],
			["img", "images/Tracts.jpg"]
			])

		var spinoreticular = new Map([
			["name", "Νωτιαιοδικτυωτό δεμάτιο"],
			["crossing", "Κατά το πλείστον είναι αχίαστο"],
			["function", "Παίζει σημαντικό ρόλο στη ρύθμιση των επιπέδων συνείδησης"],
			["passing", "Δικτυωτός σχηματισμός"],
			["ending", "Δικτυωτός σχηματισμός"],
			["position", "Δεν εικονίζεται"],
			["type", "Ανιόν"],
			["img", "images/Tracts.jpg"]
			])

		var Spino_olivary = new Map([
			["name", "Νωτιαιοελαιικό δεμάτιο"],
			["crossing", "Χιάζεται κατά τη μέση γραμμή"],
			["function", "Παίζει σημαντικό ρόλο στη ρύθμιση των επιπέδων συνείδησης"],
			["passing", "Κάτω ελαιικός πυρήνας προμήκους"],
			["ending", "Κάτω ελαιικός πυρήνας προμήκους"],
			["position", "7"],
			["type", "Ανιόν"],
			["img", "images/Tracts.jpg"]
			])

		//Descending
		var lateral_corticospinal = new Map([
			["name", "Πλάγιο φλοιονωτιαίο δεμάτιο"],
			["crossing", "Γίνεται στο Χιασμό των Πυραμίδων"],
			["function", "Εκούσιες, ξεχωριστές, επιδέξιες κινήσεις, ιδιαίτερα των περιφερικών τμημάτων των άκρων"],
			["passing", "Πυραμίδα του προμήκους"],
			["ending", "Συνδετικοί νευρώνες των πρόσθιων κεράτων του νωτιαίου µυελού"],
			["position", "15"],
			["type", "Κατιόν"],
			["img", "images/Tracts.jpg"]
			])

		var anterior_corticospinal = new Map([
			["name", "Πρόσθιο φλοιονωτιαίο δεμάτιο"],
			["crossing", "Χιάζεται κατά τη μέση γραμμή"],
			["function", "Εκούσιες, ξεχωριστές, επιδέξιες κινήσεις, ιδιαίτερα των περιφερικών τμημάτων των άκρων"],
			["passing", "Πυραμίδα του προμήκους"],
			["ending", "Συνδετικοί νευρώνες των πρόσθιων κεράτων αυχενικών και ανώτερων θωρακικών νευροτομίων"],
			["position", "14"],
			["type", "Κατιόν"],
			["img", "images/Tracts.jpg"]
			])

		var medial_reticulospinal = new Map([
			["name", "Πρόσθιο δικτυονωτιαίο δεμάτιο"],
			["crossing", "Δεν χιάζεται"],
			["function", "Διεγερτική δράση στους κινητικούς νευρώνες των πρόσθιων κεράτων του νωτιαίου µυελού"],
			["passing", "Πυρήνες του δικτυωτού σχηµατισµού του µέσου εγκεφάλου και της γέφυρας"],
			["ending", "Κινητικοί νευρώνες των πρόσθιων κεράτων του νωτιαίου µυελού"],
			["position", "3"],
			["type", "Κατιόν"],
			["img", "images/Tracts.jpg"]
			])

		var lateral_reticulospinal = new Map([
			["name", "Πλάγιο δικτυονωτιαίο δεμάτιο"],
			["crossing", "Δεν χιάζεται"],
			["function", "Ανασταλτική δράση στους κινητικούς νευρώνες των πρόσθιων κεράτων του νωτιαίου µυελού"],
			["passing", "Πυρήνες του δικτυωτού σχηµατισµού του προμήκους"],
			["ending", "Κινητικοί νευρώνες των πρόσθιων κεράτων του νωτιαίου µυελού"],
			["position", "2"],
			["type", "Κατιόν"],
			["img", "images/Tracts.jpg"]
			])

		var tectospinal = new Map([
			["name", "Τετράδυμονωτιαιο δεμάτιο"],
			["crossing", "Χιάζεται στην έκφυσή του"],
			["function", "Αντανακλαστικές κινήσεις στάσης, ως απάντηση σε οπτκά ερεθίσματα"],
			["passing", "Πρόσθιο (άνω) διδύμιο"],
			["ending", "Συνδετικοί νευρώνες των πρόσθιων κεράτων ανώτερων αυχενικών νευροτομίων"],
			["position", "6"],
			["type", "Κατιόν"],
			["img", "images/Tracts.jpg"]
			])

		var rubrospinal = new Map([
			["name", "Ερυθρονωτιαίο δεμάτιο"],
			["crossing", "Χιάζεται στην έκφυσή του"],
			["function", "Ευοδώνει τους καμπτήρες και αναστέλλει τους εκτείνοντες ή αντιτιθέμενους στη βαρύτητα μύες"],
			["passing", "Ερυθρός πυρήνας"],
			["ending", "Συνδετικοί νευρώνες των πρόσθιων κεράτων του νωτιαίου µυελού"],
			["position", "1"],
			["type", "Κατιόν"],
			["img", "images/Tracts.jpg"]
			])

		var vestibulospinal = new Map([
			["name", "Αιθουσονωτιαίο δεμάτιο"],
			["crossing", "Δεν χιάζεται"],
			["function", "Ευοδώνει τους εκτείνοντες και αναστέλλει τους καμπτήρες μύες που σχετίζονται με την ισορροπία"],
			["passing", "Αιθουσαίοι πυρήνες"],
			["ending", "Συνδετικοί νευρώνες των πρόσθιων κεράτων του νωτιαίου µυελού"],
			["position", "5"],
			["type", "Κατιόν"],
			["img", "images/Tracts.jpg"]
			])

		//Supplementary for Spinal Tracts
		var spinal_tracts = [lateral_spinothalamic, ventral_spinothalamic, fasciculus_cuneatus, fasciculus_cuneatus, dorsal_spinocerebellar, ventral_spinocerebellar, spinoreticular, spinotectal, Spino_olivary, lateral_corticospinal, anterior_corticospinal, medial_reticulospinal, lateral_reticulospinal, tectospinal, rubrospinal, vestibulospinal];

		var st_questions_text = new Map([
			["name", "Πως λέγεται η δομή με αριθμό "],
			["crossing", "Τι ισχύει για τον χιασμό στο "],
			["passing", "Από που διέρχεται το "],
			["ending", "Που καταλήγει το "],
			["function", "Ποιά λειτουργία αντιστοιχεί στο "],
			["position", "Ποιός αριθμός αντιστοιχεί στο "],
			["type", "Τι είδους είναι το "],
			["img", "images/Tracts.jpg"]
			])

		var st_questions = ["crossing", "passing", "ending", "position", "type", "function"];

		var question_categories = [
			[cn_questions, cranial_nerves, cn_questions_text],
			[st_questions, spinal_tracts, st_questions_text]
			];

		var answerChoices = new Set();

		var previousQuestions = new Set();

		var correctAnswerText;

		var pressedCount = 0;

		var score = 0;

		var maxScore = 0;

		var answerCount = 0;

		var questionCount = 0;

		var chosenBefore = new Set();

		var initial_categories = [...question_categories];

		//generateQuestion()

		function customQuestions(change) {
			if (TOTAL_QUESTIONS + change > 0) {
				TOTAL_QUESTIONS += change;
				document.getElementById('qCustom').innerHTML = TOTAL_QUESTIONS;
				document.getElementById('qNumber').innerHTML = TOTAL_QUESTIONS;
			}

			return TOTAL_QUESTIONS;
		}

		function customAnswers(change) {
			if (OPTIONS + change > 1) {
				OPTIONS += change;
				document.getElementById('aCustom').innerHTML = OPTIONS;
				document.getElementById('aNumber').innerHTML = OPTIONS;
			}

			return OPTIONS;
		}

		function check(checked = true) {
		    var cbs = document.querySelectorAll('input[name="modalCheckbox"]');
		    cbs.forEach((cb) => {
		        cb.checked = checked;
		    });
		}

		function checkAll() {
		    check();
		    document.getElementById('allButton').style.display = "none";
		    document.getElementById('uncheckAllButton').style.display = "inline";
		}

		function uncheckAll() {
		    check(false);
		    document.getElementById('uncheckAllButton').style.display = "none";
		    document.getElementById('allButton').style.display = "inline";
		}

		function startCustom() {
			var checkboxes = document.querySelectorAll('input[name="modalCheckbox"]');
			var checkedCount = 0;
			question_categories = [...initial_categories];


			for (cb of checkboxes) {
				if (!cb.checked) {
					if (cb.value == "Cranial Nerves") {
						question_categories.splice(0, 1);
					}else if (cb.value == "Spinal Tracts") {
						question_categories.splice(1, 1);
					}
				}else{
					checkedCount ++;
				}
			}

			if (checkedCount > 0) {
				document.getElementById('verify').style.display = "inline"
				generateQuestion();
				modal.style.display = "none";
			}else{
				alert("Δεν έχει επιλεγεί καμία κατηγορία ερωτήσεων");
			}
		}

		// Get the modal
		var modal = document.getElementById("myModal");

		// Get the <span> element that closes the modal
		var span = document.getElementsByClassName("close")[0];

		function openModal() {
		  modal.style.display = "block";

		  //Position footer
		  document.getElementById('main-footer').style.position = "fixed";
		}

		// When the user clicks on <span> (x), close the modal
		span.onclick = function() {
		  modal.style.display = "none";
		  location.href = "index.html";

		}

		function setQuestions(change) {
			if (TOTAL_QUESTIONS + change > questionCount) {
				TOTAL_QUESTIONS += change;
				document.getElementById('qNumber').innerHTML = TOTAL_QUESTIONS;
			}

			return TOTAL_QUESTIONS;
		}

		function setAnswers(change) {
			if (OPTIONS > 2 || OPTIONS == 2 && change > 0) {
				OPTIONS += change;
				document.getElementById('aNumber').innerHTML = OPTIONS;
			}

			return OPTIONS;
		}

		function dropDown() {
			document.getElementById('dropDown').classList.toggle("show");
		}

		// Close the dropdown if the user clicks outside of it
		window.onclick = function(event) {
		  if (!event.target.matches('.dropbtn') && !event.target.matches('.plus_btn') && !event.target.matches('.minus_btn')) {
		    var dropdowns = document.getElementsByClassName("dropdown-content");
		    var i;
		    for (i = 0; i < dropdowns.length; i++) {
		      var openDropdown = dropdowns[i];
		      if (openDropdown.classList.contains('show')) {
		        openDropdown.classList.remove('show');
		      }
		    }
		  }
		}

		function newQuiz(){
			location.href = "customQuiz.html";
		}

		function endScreen(){
			document.getElementById('question').style.textAlign = "center";
			document.getElementById('questionText').innerHTML = "Συγχαρητήρια ολοκλήρωσες το Quiz !";
			document.getElementById('score').innerHTML = score + "/" + maxScore;
			document.getElementById('scoreText').innerHTML = "Final Score";
			document.getElementById('questionNumber').innerHTML = null;
			document.getElementById('verify').style.display = "none";
			document.getElementById('newQuiz').style.display = "inline";
			document.getElementById('return').style.display = "block";
			document.querySelector("div[class='container'] img").style.width = "40%";

			//Position footer
			document.getElementById('main-footer').style.position = "fixed";
		}

		function removeAllChildNodes(parent) {
		    while (parent.firstChild) {
		        parent.removeChild(parent.firstChild);
		    }
		}

		function nextQuestion(){
			
			//Reset for next question
			removeAllChildNodes(answerOptions);
			answerChoices.clear();
			chosenBefore.clear();
			document.getElementById('verify').style.display = "inline"
			document.getElementById('next').style.display = "none"
			document.getElementById('result').innerHTML = null
			document.getElementById('question_img').style.display = "none";
			pressedCount = 0;
			answerCount = 0;

			if (questionCount == TOTAL_QUESTIONS){
				endScreen();
			}else{
				generateQuestion();
			}
		}

		function verify(){

			let radioButtonList = document.querySelectorAll('input[name="option"]');

			for (rb of radioButtonList){
				if (rb.checked){
					if (!chosenBefore.has(rb.value)) {
						pressedCount ++ 
					}else{
						break;
					}

					if (rb.value == correctAnswerText){
						document.getElementById('result').innerHTML = "Σωστά!";
						document.getElementById('result').style.color = "green";
						document.getElementById('verify').style.display = "none";
						document.getElementById('next').style.display = "inline";

						//Calculate score
						maxScore = maxScore + answerCount - 1;

						var scoreChange = answerCount - 1 - pressedCount + 1
						if (scoreChange > 0){
							score = score + scoreChange;
							document.getElementById('score').innerHTML = score
						}

					}else{
						document.getElementById('result').innerHTML = "Οχι... Προσπάθησε ξανά";
						document.getElementById('result').style.color = "red";
						chosenBefore.add(rb.value);
					}
				}
			}

			//Position footer
			if (document.getElementById('main-left').offsetHeight < 600){
				document.getElementById('main-footer').style.position = "fixed";
			}else{
				document.getElementById('main-footer').style.position = "relative";
			}
		}

		function shuffle(arr){
			for (var i = arr.length - 1; i > 0; i--) {  
    
		       // Generate random number  
		       var j = Math.floor(Math.random() * (i + 1)); 
		                    
		       var temp = arr[i]; 
		       arr[i] = arr[j]; 
		       arr[j] = temp; 
		   	} 
        
   			return arr; 
		}

		function showAnswers(answerArray) {
			for (answer of answerArray){
		    	let option = document.createElement('input');
		    	option.type = 'radio';
  				option.name = 'option';
  				option.value = answer;

  				let textHolder = document.createElement('label')
  				textHolder.htmlFor = 'option';
  				textHolder.class = 'answerText'

  				let optionText = document.createTextNode(answer);
  				textHolder.appendChild(optionText);

				let optionHolderLi = document.createElement('li');
				optionHolderLi.appendChild(option);
				optionHolderLi.appendChild(textHolder);

				let optionHolderUl = document.getElementById('answerOptions');
				optionHolderUl.appendChild(optionHolderLi);

				//Number of answers
				answerCount ++;
			}

			//Position footer
			if (document.getElementById('main-left').offsetHeight < 600){
				document.getElementById('main-footer').style.position = "fixed";
			}else{
				document.getElementById('main-footer').style.position = "relative";
			}
		}

		function buildAnswers(GeneralContent, QuestionContent, QuestionCategory){

			//create correct answer
			if (QuestionCategory == "nuclei"){
				let possibleAnswers = QuestionContent.get("nuclei");
				correctAnswerText = possibleAnswers[Math.floor(Math.random()*possibleAnswers.length)];
			}else{
				correctAnswerText = QuestionContent.get(QuestionCategory)
			}
			answerChoices.add(correctAnswerText);

			//Remove duplicate answers
			generalAnswerContent = [...GeneralContent];
			questionContent_index = generalAnswerContent.indexOf(QuestionContent);
			generalAnswerContent.splice(questionContent_index, 1); // returns the array without the questionContent_index

			for (let specificContent of generalAnswerContent){
				if (specificContent.get(QuestionCategory) == correctAnswerText){
					let specificContent_index = generalAnswerContent.indexOf(specificContent);
					generalAnswerContent.splice(specificContent_index, 1);
				}
			}

			//create wrong answers
			for (i = 0; i < OPTIONS - 1; i++){

				if (generalAnswerContent.length == 0){
					break;
				}

				//get a specific content from the generalAnswerContent (f. ex. cn_II from cranial_nerves)
				let specificContent = generalAnswerContent[Math.floor(Math.random()*generalAnswerContent.length)];
				if (QuestionCategory == "nuclei"){
					let possibleAnswers = specificContent.get("nuclei");
					var wrongAnswerText = possibleAnswers[Math.floor(Math.random()*possibleAnswers.length)];
				}else{
					var wrongAnswerText = specificContent.get(QuestionCategory)
				}
				answerChoices.add(wrongAnswerText);
				//Remove specificContent from generalAnswerContent
				specificContent_index = generalAnswerContent.indexOf(specificContent);
				generalAnswerContent.splice(specificContent_index, 1);

				for (let specificContent of generalAnswerContent){
					if (specificContent.get(QuestionCategory) == wrongAnswerText){
						let specificContent_index = generalAnswerContent.indexOf(specificContent);
						generalAnswerContent.splice(specificContent_index, 1);
					}
				}
			}

			shuffle(answerChoices);
			showAnswers(answerChoices);
		}

		function buildQuestion(QuestionContent, QuestionCategory, QuestionText){

			questionCount ++;

			//if (QuestionCategory == "name"){
				//var categoryText = QuestionText.get(QuestionCategory)+ QuestionContent.get("#")+";";
			if (QuestionCategory == "position"){
				let image_src = QuestionContent.get("img");
				document.getElementById('question_img').src = image_src;
				document.getElementById('question_img').style.display = "block";
				var categoryText = QuestionText.get(QuestionCategory) + QuestionContent.get("name")+";";
			}else{
				var categoryText = QuestionText.get(QuestionCategory) + QuestionContent.get("name")+";";
			}

			//Show the question
			if (previousQuestions.has(categoryText)){
				nextQuestion();
			}else{
				document.getElementById('questionText').innerHTML = categoryText;
				document.getElementById('questionNumber').innerHTML = "Ερώτηση "+ questionCount+ "/"+ TOTAL_QUESTIONS +": ";
				previousQuestions.add(categoryText);
			}
		}

		function generateQuestion(){

			//pick the question category
			let randomCategory = question_categories[Math.floor(Math.random()*question_categories.length)];

			//pick a random subcategory of randomCategory
			let subcategories = randomCategory[0]
			let randomSubcategory = subcategories[Math.floor(Math.random()*subcategories.length)];

			//pick the content of the question
			let allContent = randomCategory[1]
			let randomContent = allContent[Math.floor(Math.random()*allContent.length)];

			//Main text of the question
			let mainText = randomCategory[2]

			//create the text of the question
			buildQuestion(randomContent, randomSubcategory, mainText);

			//create the text of the answers
			buildAnswers(allContent, randomContent, randomSubcategory);
		}

	</script>


	<!--Developed by Konstantinos Vrettos -->

</body>
</html>